{% extends 'base.html' %}
{% load static %}

{% block title %} <title>Society Management | Member-Master-Creation</title> {% endblock title %}

{% block body %}

<style>
  @media print {
    .no-print {
      display: none;
    }

    #table-container {
      overflow-x: visible !important;
    }
  }
</style>


<div class='container-fluid' id="societyHead">
  <div class="row">
    <div class="col-lg-5 ms-auto me-auto">
      {% verbatim %}
      <div class="text-center mt-2" id="print-head">
        <h3 id="heading" style="color: #000 !important; font-family: 'Calibri', sans-serif;"><b>{{ society.society_name
            }}</b></h3>
        <p style="font-family: 'Calibri', sans-serif;" class="mt-3 p-0 mb-0 print-head-content"><b>Registraion Number:
          </b> <span>{{ society.registration_number }}</span></p>
        <p style="font-family: 'Calibri', sans-serif;" class="print-head-content">{{ society.society_reg_address }}, {{
          society.socity_state }}, {{ society.pin_code }}</p>
      </div>
      {% endverbatim %}
    </div>
  </div>
  <div class="pp float-end mb-2 d-flex gap-2" style="font-family: 'Calibri', sans-serif;">
    <button class="dt-button btn-primary dt-button-custom no-print me-4" onclick="printForm()">Print</button>
  </div>


  <div class="text-center" id="formName" style="font-family: 'Calibri', sans-serif;">
    <h4 class="m-0 p-0 form-name">Form I-MH</h4>
    <p class="m-0 p-0 form-name">SEE RULE 32 and 65(1)</p>
    <hr>
  </div>
  <div class="text-center mt-3" id="sectionName" style="font-family: 'Calibri', sans-serif;">
    <h4 class="m-0 p-0 form-name">Register of Members</h4>
    <p class="m-0 p-0 form-name">(Section 38(1)of the Maharashtra Co-Operative Societies' Act 1960)</p>
  </div>


  {% if members %}
  <div id="formMHVue">

    <div class="container mb-3">
      <div class="ps-4" id="formContent" style="font-family: 'Calibri', sans-serif;">
        <hr>

        <div class="d-flex contentss mb-2">
          <p class="w-50 www">1. Serial No.</p>
          <p class="w-50 www">123</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">2. Date of Admission</p>
          <p class="w-50 www">{{ members.date_of_admission }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">3. Date of Payment of Enterance Fees</p>
          <p class="w-50 www">{{ members.date_of_entrance_fees }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">4. Full Name</p>
          <p class="w-50 www">{{ members.member_name }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">5. Permanent Address</p>
          <p class="w-50 www">{{ members.member_address }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www ps-2">Resident Address</p>
          <p class="w-50 www">{{ members.member_address }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">6. Occupation</p>
          <p class="w-50 www">{{ members.member_occupation }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">7. Age on the Date of Nomination</p>
          <p class="w-50 www">{{ members.age_at_date_of_admission }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">8. Full Name and address of the person :</p>
          <p class="w-50 www">{{ members.member_name }}, {{ members.member_address }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www ps-2">Nominated by the member under Section 30(1) :</p>
          <p class="w-50 www">Undefined</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">9. Date of Nomination</p>
          <p class="w-50 www">Undefined</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">10. Date of cessation of Membership</p>
          <p class="w-50 www">{{ members.date_of_cessation }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">11. Reason for cessation</p>
          <p class="w-50 www">{{ members.reason_for_cessation }}</p>
        </div>

        <div class="d-flex mb-2 contentss">
          <p class="w-50 www">12. Remarks</p>
          <p class="w-50 www">Lorem ipsum dolor sit amet consectetur adipisicing elit. Distinctio necessitatibus minima
            voluptate esse ipsum. Aliquam ea asperiores voluptatem soluta itaque mollitia dicta aspernatur illum id ut.
            Iste placeat sint maxime?</p>
        </div>




      </div>
      <div class="shares-table mt-3" id="table-container">
        <center>
          <h5 class="report_h m-0 p-0">Particulars of Shares held</h5>
        </center>
        <div class="table-responsive" style="font-family: 'Calibri',sans-serif; font-size: 15px;">
          <table class="table table-sm table-bordered table-hover" style="vertical-align: middle; align-items: center;">
            <thead class="table-dark">
              <th>Sr No.</th>
              <th>Date of Issue</th>
              <th>Cash Book Folio</th>
              <th>Application No. of Share</th>
              <th>Allotment No. of Share</th>
              <th>Amount Received On</th>
              <th>Total Amount Received</th>
              <th>No. of Shares held</th>
              <th>Serial No. of Certificate</th>
            </thead>
            {% for share in shares_details %}
            <tbody>
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ share.shares_date }}</td>
                <td>{{ share.folio_number }}</td>
                <td>{{ share.application_number }}</td>
                <td>{{ share.allotment_number }}</td>
                <td>{{ share.shares_date }}</td>
                <td>{{ share.shares_date }}</td>
                <td>{{ share.shares_date }}</td>
                <td>{{ share.shares_certificate }}</td>
              </tr>
            </tbody>
            {% endfor %}
          </table>
        </div>
      </div>
      {% else %}
      <h2 class='text-center'>No Details Found!</h2>
      {% endif %}
    </div>

  </div>

  <script>
    let datatable_columns = {{ datatable_columns }};
  </script>

  <script>
    $(document).ready(function () {
      var dropdown = $('#statusFilterDropdown');
      console.log("Dropdown value:", dropdown.val());

      // Parse the query string to get the value of the 'selected' parameter
      var queryString = window.location.search;
      var urlParams = new URLSearchParams(queryString);
      var selectedValue = urlParams.get('selected');

      // Set the value of the dropdown to the selectedValue
      if (selectedValue) {
        dropdown.val(selectedValue);
      }

      // Add an event listener for the change event
      dropdown.on('change', function () {
        var selectedValue = dropdown.val();
        var newUrl = window.location.pathname + '?selected=' + selectedValue;
        window.location.href = newUrl;
      });
    });
  </script>
  {% endblock body %}